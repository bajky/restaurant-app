<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet author="David" id="001">
        <comment>Sequence SEQ_COMMENTS for table COMMENT created</comment>
        <createSequence sequenceName="SEQ_COMMENT" startValue="1"/>
        <createTable tableName="COMMENT">
            <column name="ID" type="NUMBER(19)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="COMMENT_PK"/>
            </column>
            <column name="ADDING_TIME" type="NUMBER(19)">
                <constraints nullable="false"/>
            </column>
            <column name="IS_VISIBLE" type="NUMBER(1)">
                <constraints nullable="false"/>
            </column>
            <column name="TEXT" type="VARCHAR2(255)">
                <constraints nullable="false"/>
            </column>
            <column name="RESTAURANT_FK" type="NUMBER(19)"/>
            <column name="USER_FK" type="NUMBER(19)"/>
        </createTable>
    </changeSet>

    <changeSet author="David" id="002">
        <comment>Sequence SEQ_FOOD for table FOOD created</comment>
        <createSequence sequenceName="SEQ_FOOD" startValue="1"/>
        <createTable tableName="FOOD">
            <column name="ID" type="NUMBER(19)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR2(1000 CHAR)"/>
            <column name="PRICE" type="NUMBER(10)">
                <constraints nullable="false"/>
            </column>
            <column name="TITTLE" type="VARCHAR2(20 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="TYPE" type="VARCHAR2(10 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="MENU_FK" type="NUMBER(19)"/>
        </createTable>
    </changeSet>

    <changeSet author="David" id="003">
        <comment>Sequence SEQ_GROUP for table GROUP created</comment>
        <createSequence cacheSize="20" cycle="false"  sequenceName="SEQ_GROUP" />
        <createTable tableName="GROUP">
            <column name="ID" type="NUMBER(19)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="GROUP_PK"/>
            </column>
            <column name="CREATED_TIME" type="TIMESTAMP(6)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATOR" type="VARCHAR2(30 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR2(1000 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR2(20 CHAR)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="David" id="004">
        <comment>Sequence SEQ_MENU for table MENU created</comment>
        <createSequence cacheSize="20" cycle="false"  sequenceName="SEQ_MENU" />
        <createTable tableName="MENU">
            <column name="ID" type="NUMBER(19)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="MENU_PK"/>
            </column>
            <column name="CREATED_TIME" type="TIMESTAMP(6)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATOR" type="VARCHAR2(30 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR2(1000 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR2(20 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="RESTAURANT_FK" type="NUMBER(19)"/>
        </createTable>
    </changeSet>

    <changeSet author="David" id="005">
        <comment>Sequence SEQ_RESTAURANT for table RESTAURANT created</comment>
        <createSequence cacheSize="20" cycle="false" sequenceName="SEQ_RESTAURANT" />
        <createTable tableName="RESTAURANT">
            <column name="ID" type="NUMBER(19)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="RESTAURANT_PK"/>
            </column>
            <column name="TYPE" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="ADDRESS" type="VARCHAR2(50 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR2(255 CHAR)"/>
            <column name="EMAIL" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="PHONE_NUMBER" type="VARCHAR2(15 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="TITTLE" type="VARCHAR2(35 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="WEB" type="VARCHAR2(30 CHAR)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="David" id="006">
        <comment>Sequence SEQ_USER for table USER created</comment>
        <createSequence cacheSize="20" cycle="false"  sequenceName="SEQ_USER" />
        <createTable tableName="USER">
            <column name="ID" type="NUMBER(19)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="USER_PK"/>
            </column>
            <column name="ACC_NAME" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="ADDRESS" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="EMAIL" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="FIRST_NAME" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="ID_ACTIVE" type="NUMBER(1)">
                <constraints nullable="false"/>
            </column>
            <column name="IS_BANNED" type="NUMBER(1)">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_NAME" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="PASSWORD" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
            <column name="PHONE_NUMBER" type="VARCHAR2(255 CHAR)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="David" id="007">
        <createTable tableName="USER_GROUP">
            <column name="GROUP_FK" type="NUMBER(19)">
                <constraints nullable="false"/>
            </column>
            <column name="USER_FK" type="NUMBER(19)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <comment>primary key for table USER_GROUP</comment>
        <addPrimaryKey columnNames="GROUP_FK, USER_FK" tableName="USER_GROUP"/>
    </changeSet>

    <changeSet author="David" id="008">
        <comment>Sequence SEQ_VOTE for table VOTE created</comment>
        <createSequence cacheSize="20" cycle="false"  sequenceName="SEQ_VOTE" />
        <createTable tableName="VOTE">
            <column name="ID" type="NUMBER(19)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="VOTE_PK"/>
            </column>
            <column name="ADDING_TIME" type="TIMESTAMP(6)">
                <constraints nullable="false"/>
            </column>
            <column name="TIME_FROM" type="TIMESTAMP(6)">
                <constraints nullable="false"/>
            </column>
            <column name="TIME_TO" type="TIMESTAMP(6)">
                <constraints nullable="false"/>
            </column>
            <column name="RESTAURANT_FK" type="NUMBER(19)"/>
            <column name="USER_FK" type="NUMBER(19)"/>
        </createTable>
    </changeSet>

    <changeSet author="David" id="009">
        <comment>foreign key USER_FK from table COMMENT references to table USER</comment>
        <addForeignKeyConstraint baseColumnNames="USER_FK" baseTableName="COMMENT" constraintName="FK_COMMENT_USER" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER"/>
    </changeSet>
    <changeSet author="David" id="010">
        <comment>foreign key RESTAURANT_FK from table VOTE references to table RESTAURANT</comment>
        <addForeignKeyConstraint baseColumnNames="RESTAURANT_FK" baseTableName="VOTE" constraintName="FK_VOTE_RESTAURANT" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="RESTAURANT"/>
    </changeSet>
    <changeSet author="David" id="011">
        <comment>foreign key RESTAURANT_FK from table MENU references to table RESTAURANT</comment>
        <addForeignKeyConstraint baseColumnNames="RESTAURANT_FK" baseTableName="MENU" constraintName="FK_MENU_RESTAURANT" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="RESTAURANT"/>
    </changeSet>
    <changeSet author="David" id="012">
        <comment>foreign key MENU_FK from table FOOD references to table MENU</comment>
        <addForeignKeyConstraint baseColumnNames="MENU_FK" baseTableName="FOOD" constraintName="FK_FOOD_MENU" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="MENU"/>
    </changeSet>
    <changeSet author="David" id="013">
        <comment>foreign key USER_FK from table VOTE references to table USER</comment>
        <addForeignKeyConstraint baseColumnNames="USER_FK" baseTableName="VOTE" constraintName="FK_VOTE_USER" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER"/>
    </changeSet>
    <changeSet author="David" id="014">
        <comment>foreign key RESTAURANT_FK from table COMMENT references to table RESTAURANT</comment>
        <addForeignKeyConstraint baseColumnNames="RESTAURANT_FK" baseTableName="COMMENT" constraintName="FK_COMMENT_RESTAURANT" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="RESTAURANT"/>
    </changeSet>
    <changeSet author="David" id="015">
        <comment>foreign key GROUP_FK from table USER_GROUP references to table GROUP</comment>
        <addForeignKeyConstraint baseColumnNames="GROUP_FK" baseTableName="USER_GROUP" constraintName="FK_USER_GROUP_GROUP" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="GROUP"/>
    </changeSet>
    <changeSet author="David" id="016">
        <comment>foreign key USER_FK from table USER_GROUP references to table USER</comment>
        <addForeignKeyConstraint baseColumnNames="USER_FK" baseTableName="USER_GROUP" constraintName="FK_USER_GROUP_USER" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="ID" referencedTableName="USER"/>
    </changeSet>
</databaseChangeLog>
